<div *ngIf="!newReleases || !friendsFavorites || !discover || !popular; else loaded;" class="center_loading">
    <mat-spinner color="accent"></mat-spinner>
</div>
<ng-template #loaded>

    <!-- New Releases -->
    <section>
        <h3>New Releases</h3>
        <!-- Artists -->
        <mat-grid-list *ngIf="newReleases.artists.length !== 0" cols="4" gutterSize="15px">
            <h3>Artists</h3>
            <mat-grid-tile *ngFor="let artist of newReleases.artists" class="artist-card col-sm-3 center-block" [routerLink]="['/artists', artist.id]">
                <div style="margin-top: 20px;">
                    <img style="border-radius: 100px;" class="routing_img" src="{{artist.artistImageUrl}}" alt="{{artist.name}}">
                    <div style="text-align: center;">{{artist.name}}</div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>

        <!-- Albums -->
        <mat-grid-list *ngIf="newReleases.albums.length !== 0" cols="4" gutterSize="15px" class="padded">
            <h3>Albums</h3>
            <mat-grid-tile *ngFor="let album of newReleases.albums" [routerLink]="['/albums', album.id]">
                <div class="col_flex">
                    <img class="routing_img" src="{{album.albumArtUrl}}" alt="{{album.title}}">
                    <p class="album_name">{{album.title}}</p>
                    <p class="artist_name">{{album.artistName}}</p>
                </div>
            </mat-grid-tile>
        </mat-grid-list>

        <!-- Playlists -->
        <div *ngIf="newReleases.playlists.length !== 0">
            <h3>Playlists</h3>
            <mat-grid-tile *ngFor="let playlist of newReleases.playlists" [routerLink]="['/playlistss', playlist.id]">
                <div class="col_flex">
                    <img class="routing_img" src="{{playlist.albumArtUrl}}" alt="{{playlist.title}}">
                    <p class="album_name">{{playlist.title}}</p>
                    <p class="artist_name">{{playlist.artistName}}</p>
                </div>
            </mat-grid-tile>
            {{playlist.image}} {{playlist.name}}
        </div>

        <!-- Songs -->
        <div *ngIf="newReleases.songs.size !== 0">
            <h3>Songs</h3>
            <div id="album-tracklist">
                <mat-table #table [dataSource]="newReleasesSongTableData" matSort>

                    <!-- Play Button Column -->
                    <ng-container matColumnDef="playButton">
                        <mat-header-cell *matHeaderCellDef></mat-header-cell>
                        <mat-cell *matCellDef="let song">
                            <button mat-icon-button class="song_play_button" [ngStyle]="getPlayVisibility(song.id)" (click)="playSong(song.id)">
                                <mat-icon>play_circle_filled</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>

                    <!-- Title Column -->
                    <ng-container matColumnDef="title">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.title}}</mat-cell>
                    </ng-container>

                    <!-- Artist Column -->
                    <ng-container matColumnDef="artist">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Artist </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.artistName}}</mat-cell>
                    </ng-container>

                    <!-- Album Column -->
                    <ng-container matColumnDef="album">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Album </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.albumTitle}}</mat-cell>
                    </ng-container>

                    <!-- Favorite Button Column -->
                    <ng-container matColumnDef="favoriteButton">
                        <mat-header-cell *matHeaderCellDef></mat-header-cell>
                        <mat-cell *matCellDef="let song">
                            <button mat-icon-button class="song_favorite_button" (click)="favoriteOrUnfavoriteSong(song.id)">
                                <mat-icon>{{getFavoritedIcon(song.id, song.isFavorited)}}</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="['playButton', 'title', 'artist', 'album', 'favoriteButton']"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: ['playButton', 'title', 'artist', 'album', 'favoriteButton'];" (mouseenter)="showPlay(row.id)"
                        (mouseleave)="hidePlay(row.id)"></mat-row>
                </mat-table>
            </div>
        </div>
    </section>

    <!-- Popular -->
    <section>
        <h3>Popular</h3>
        <!-- Artists -->
        <mat-grid-list *ngIf="popular.artists.length !== 0" cols="4" gutterSize="15px" class="padded">
            <h3>Artists</h3>
            <mat-grid-tile *ngFor="let artist of popular.artists" class="artist-card col-sm-3 center-block" [routerLink]="['/artists', artist.id]">
                <div style="margin-top: 20px;">
                    <img style="border-radius: 100px;" class="routing_img" src="{{artist.artistImageUrl}}" alt="{{artist.name}}">
                    <div style="text-align: center;">{{artist.name}}</div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>

        <!-- Albums -->
        <mat-grid-list *ngIf="popular.albums.length !== 0" cols="4" gutterSize="15px" class="padded">
            <h3>Albums</h3>
            <mat-grid-tile *ngFor="let album of popular.albums" [routerLink]="['/albums', album.id]">
                <div class="col_flex">
                    <img class="routing_img" src="{{album.albumArtUrl}}" alt="{{album.title}}">
                    <p class="album_name">{{album.title}}</p>
                    <p class="artist_name">{{album.artistName}}</p>
                </div>
            </mat-grid-tile>
        </mat-grid-list>

        <!-- Playlists -->
        <div *ngIf="popular.playlists.length !== 0">
            <h3>Playlists</h3>
            <mat-grid-tile *ngFor="let playlist of popular.playlists" [routerLink]="['/playlistss', playlist.id]">
                <div class="col_flex">
                    <img class="routing_img" src="{{playlist.albumArtUrl}}" alt="{{playlist.title}}">
                    <p class="album_name">{{playlist.title}}</p>
                    <p class="artist_name">{{playlist.artistName}}</p>
                </div>
            </mat-grid-tile>
            {{playlist.image}} {{playlist.name}}
        </div>

        <!-- Songs -->
        <div *ngIf="popular.songs.size !== 0">
            <h3>Songs</h3>
            <div id="album-tracklist">
                <mat-table #table [dataSource]="popularSongTableData" matSort>

                    <!-- Play Button Column -->
                    <ng-container matColumnDef="playButton">
                        <mat-header-cell *matHeaderCellDef></mat-header-cell>
                        <mat-cell *matCellDef="let song">
                            <button mat-icon-button class="song_play_button" [ngStyle]="getPlayVisibility(song.id)" (click)="playSong(song.id)">
                                <mat-icon>play_circle_filled</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>

                    <!-- Title Column -->
                    <ng-container matColumnDef="title">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.title}}</mat-cell>
                    </ng-container>

                    <!-- Artist Column -->
                    <ng-container matColumnDef="artist">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Artist </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.artistName}}</mat-cell>
                    </ng-container>

                    <!-- Album Column -->
                    <ng-container matColumnDef="album">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Album </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.albumTitle}}</mat-cell>
                    </ng-container>

                    <!-- Favorite Button Column -->
                    <ng-container matColumnDef="favoriteButton">
                        <mat-header-cell *matHeaderCellDef></mat-header-cell>
                        <mat-cell *matCellDef="let song">
                            <button mat-icon-button class="song_favorite_button" (click)="favoriteOrUnfavoriteSong(song.id)">
                                <mat-icon>{{getFavoritedIcon(song.id, song.isFavorited)}}</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="['playButton', 'title', 'artist', 'album', 'favoriteButton']"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: ['playButton', 'title', 'artist', 'album', 'favoriteButton'];" (mouseenter)="showPlay(row.id)"
                        (mouseleave)="hidePlay(row.id)"></mat-row>
                </mat-table>
            </div>
        </div>
    </section>

    <!-- Friends Favorites -->
    <section>
        <h3>Friends Favorites</h3>
        <!-- Artists -->
        <mat-grid-list *ngIf="friendsFavorites.artists.length !== 0" cols="4" gutterSize="15px" class="padded">
            <h3>Artists</h3>
            <mat-grid-tile *ngFor="let artist of friendsFavorites.artists" class="artist-card col-sm-3 center-block" [routerLink]="['/artists', artist.id]">
                <div style="margin-top: 20px;">
                    <img style="border-radius: 100px;" class="routing_img" src="{{artist.artistImageUrl}}" alt="{{artist.name}}">
                    <div style="text-align: center;">{{artist.name}}</div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>

        <!-- Albums -->
        <mat-grid-list *ngIf="friendsFavorites.albums.length !== 0" cols="4" gutterSize="15px" class="padded">
            <h3>Albums</h3>
            <mat-grid-tile *ngFor="let album of friendsFavorites.albums" [routerLink]="['/albums', album.id]">
                <div class="col_flex">
                    <img class="routing_img" src="{{album.albumArtUrl}}" alt="{{album.title}}">
                    <p class="album_name">{{album.title}}</p>
                    <p class="artist_name">{{album.artistName}}</p>
                </div>
            </mat-grid-tile>
        </mat-grid-list>

        <!-- Playlists -->
        <div *ngIf="friendsFavorites.playlists.length !== 0">
            <h3>Playlists</h3>
            <mat-grid-tile *ngFor="let playlist of friendsFavorites.playlists" [routerLink]="['/playlistss', playlist.id]">
                <div class="col_flex">
                    <img class="routing_img" src="{{playlist.albumArtUrl}}" alt="{{playlist.title}}">
                    <p class="album_name">{{playlist.title}}</p>
                    <p class="artist_name">{{playlist.artistName}}</p>
                </div>
            </mat-grid-tile>
            {{playlist.image}} {{playlist.name}}
        </div>

        <!-- Songs -->
        <div *ngIf="friendsFavorites.songs.size !== 0">
            <h3>Songs</h3>
            <div id="album-tracklist">
                <mat-table #table [dataSource]="friendsFavoritesSongTableData" matSort>

                    <!-- Play Button Column -->
                    <ng-container matColumnDef="playButton">
                        <mat-header-cell *matHeaderCellDef></mat-header-cell>
                        <mat-cell *matCellDef="let song">
                            <button mat-icon-button class="song_play_button" [ngStyle]="getPlayVisibility(song.id)" (click)="playSong(song.id)">
                                <mat-icon>play_circle_filled</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>

                    <!-- Title Column -->
                    <ng-container matColumnDef="title">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.title}}</mat-cell>
                    </ng-container>

                    <!-- Artist Column -->
                    <ng-container matColumnDef="artist">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Artist </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.artistName}}</mat-cell>
                    </ng-container>

                    <!-- Album Column -->
                    <ng-container matColumnDef="album">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Album </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.albumTitle}}</mat-cell>
                    </ng-container>

                    <!-- Favorite Button Column -->
                    <ng-container matColumnDef="favoriteButton">
                        <mat-header-cell *matHeaderCellDef></mat-header-cell>
                        <mat-cell *matCellDef="let song">
                            <button mat-icon-button class="song_favorite_button" (click)="favoriteOrUnfavoriteSong(song.id)">
                                <mat-icon>{{getFavoritedIcon(song.id, song.isFavorited)}}</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="['playButton', 'title', 'artist', 'album', 'favoriteButton']"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: ['playButton', 'title', 'artist', 'album', 'favoriteButton'];" (mouseenter)="showPlay(row.id)"
                        (mouseleave)="hidePlay(row.id)"></mat-row>
                </mat-table>
            </div>
        </div>
    </section>

    <!-- Discover -->
    <section>
        <h3>Discover</h3>
        <!-- Artists -->
        <mat-grid-list *ngIf="discover.artists.length !== 0" cols="4" gutterSize="15px" class="padded">
            <h3>Artists</h3>
            <mat-grid-tile *ngFor="let artist of discover.artists" class="artist-card col-sm-3 center-block" [routerLink]="['/artists', artist.id]">
                <div style="margin-top: 20px;">
                    <img style="border-radius: 100px;" class="routing_img" src="{{artist.artistImageUrl}}" alt="{{artist.name}}">
                    <div style="text-align: center;">{{artist.name}}</div>
                </div>
            </mat-grid-tile>
        </mat-grid-list>

        <!-- Albums -->
        <mat-grid-list *ngIf="discover.albums.length !== 0" cols="4" gutterSize="15px" class="padded">
            <h3>Albums</h3>
            <mat-grid-tile *ngFor="let album of discover.albums" [routerLink]="['/albums', album.id]">
                <div class="col_flex">
                    <img class="routing_img" src="{{album.albumArtUrl}}" alt="{{album.title}}">
                    <p class="album_name">{{album.title}}</p>
                    <p class="artist_name">{{album.artistName}}</p>
                </div>
            </mat-grid-tile>
        </mat-grid-list>

        <!-- Playlists -->
        <div *ngIf="discover.playlists.length !== 0">
            <h3>Playlists</h3>
            <mat-grid-tile *ngFor="let playlist of discover.playlists" [routerLink]="['/playlistss', playlist.id]">
                <div class="col_flex">
                    <img class="routing_img" src="{{playlist.albumArtUrl}}" alt="{{playlist.title}}">
                    <p class="album_name">{{playlist.title}}</p>
                    <p class="artist_name">{{playlist.artistName}}</p>
                </div>
            </mat-grid-tile>
            {{playlist.image}} {{playlist.name}}
        </div>

        <!-- Songs -->
        <div *ngIf="discover.songs.size !== 0">
            <h3>Songs</h3>
            <div id="album-tracklist">
                <mat-table #table [dataSource]="discoverSongTableData" matSort>

                    <!-- Play Button Column -->
                    <ng-container matColumnDef="playButton">
                        <mat-header-cell *matHeaderCellDef></mat-header-cell>
                        <mat-cell *matCellDef="let song">
                            <button mat-icon-button class="song_play_button" [ngStyle]="getPlayVisibility(song.id)" (click)="playSong(song.id)">
                                <mat-icon>play_circle_filled</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>

                    <!-- Title Column -->
                    <ng-container matColumnDef="title">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.title}}</mat-cell>
                    </ng-container>

                    <!-- Artist Column -->
                    <ng-container matColumnDef="artist">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Artist </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.artistName}}</mat-cell>
                    </ng-container>

                    <!-- Album Column -->
                    <ng-container matColumnDef="album">
                        <mat-header-cell *matHeaderCellDef mat-sort-header> Album </mat-header-cell>
                        <mat-cell *matCellDef="let song">{{song.albumTitle}}</mat-cell>
                    </ng-container>

                    <!-- Favorite Button Column -->
                    <ng-container matColumnDef="favoriteButton">
                        <mat-header-cell *matHeaderCellDef></mat-header-cell>
                        <mat-cell *matCellDef="let song">
                            <button mat-icon-button class="song_favorite_button" (click)="favoriteOrUnfavoriteSong(song.id)">
                                <mat-icon>{{getFavoritedIcon(song.id, song.isFavorited)}}</mat-icon>
                            </button>
                        </mat-cell>
                    </ng-container>

                    <mat-header-row *matHeaderRowDef="['playButton', 'title', 'artist', 'album', 'favoriteButton']"></mat-header-row>
                    <mat-row *matRowDef="let row; columns: ['playButton', 'title', 'artist', 'album', 'favoriteButton'];" (mouseenter)="showPlay(row.id)"
                        (mouseleave)="hidePlay(row.id)"></mat-row>
                </mat-table>
            </div>
        </div>
    </section>

</ng-template>